<!doctype html>
<html lang="${LANGUAGE}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Postfix Report">
    <link rel="icon" href="https://www.postfix.org/favicon.ico">

    <title>${L_REPORT_TITLE}</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Prism CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">

    <style>
        body {
            padding-top: 4.5rem;
            background-color: #f8f9fa;
        }

        .stat-card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, .05);
            transition: transform 0.2s;
        }

        .stat-card:hover {
            transform: scale(1.02);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.8;
        }

        .section-header {
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            margin-top: 2rem;
            color: #495057;
        }

        footer {
            background-color: #212529;
            color: rgba(255, 255, 255, .5);
            padding: 2rem 0;
            margin-top: 3rem;
        }

        .table-responsive {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, .05);
        }

        pre {
            background: #f1f3f5;
            padding: 1rem;
            border-radius: 5px;
            max-height: 400px;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="../"><i class="fa-solid fa-arrow-left me-2"></i>${L_REPORT_TITLE}</a>
        </div>
    </nav>

    <div class="container">
        <!-- Info Strip -->
        <div class="card bg-dark text-white p-4 mb-4 stat-card">
            <div class="row">
                <div class="col-md-6">
                    <div class="stat-label">${L_HOSTNAME}</div>
                    <div class="h5 mb-3">${ACTIVEHOSTNAME}</div>
                    <div class="stat-label">${L_REPORT_DATE}</div>
                    <div class="h6">${REPORTDATE}</div>
                </div>
                <div class="col-md-6 d-flex align-items-center justify-content-md-end text-md-end mt-3 mt-md-0">
                    <div class="small opacity-75">
                        <i class="fa-solid fa-shield-halved me-2"></i>${L_WARNING_EXPOSURE}
                    </div>
                </div>
            </div>
        </div>

        <!-- Metric Grid -->
        <div class="row g-3 mb-4 text-center">
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-primary text-white">
                    <div class="stat-value counter">${ReceivedEmail}</div>
                    <div class="stat-label">${L_RECEIVED_EMAIL}</div>
                </div>
            </div>
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-success text-white">
                    <div class="stat-value counter">${DeliveredEmail}</div>
                    <div class="stat-label">${L_DELIVERED_MAIL}</div>
                </div>
            </div>
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-info text-white">
                    <div class="stat-value counter">${ForwardedEmail}</div>
                    <div class="stat-label">${L_FORWARDED_MAIL}</div>
                </div>
            </div>
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-warning text-dark">
                    <div class="stat-value counter">${DeferredEmailCount}</div>
                    <div class="stat-label">${L_DEFERRED} (${DeferredEmailDeferralsCount})</div>
                </div>
            </div>
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-danger text-white">
                    <div class="stat-value counter">${BouncedEmail}</div>
                    <div class="stat-label">${L_BOUNCED_MAIL}</div>
                </div>
            </div>
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-secondary text-white">
                    <div class="stat-value counter">${RejectedWarningsEmail}</div>
                    <div class="stat-label">${L_REJECTED_WARNING} (${RejectedEmailPercentage})</div>
                </div>
            </div>
        </div>

        <!-- Metric Grid Row 2 -->
        <div class="row g-3 mb-5 text-center justify-content-center">
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-danger text-white">
                    <div class="stat-value counter">${RejectedEmailCount}</div>
                    <div class="stat-label">${L_REJECTED_MAIL} (${RejectedEmailPercentage})</div>
                </div>
            </div>
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-dark text-white">
                    <div class="stat-value counter">${HeldEmail}</div>
                    <div class="stat-label">${L_HELD_MAIL}</div>
                </div>
            </div>
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-light text-dark">
                    <div class="stat-value counter">${DiscardedEmailCount}</div>
                    <div class="stat-label">${L_DISCARDED_MAIL} (${DiscardedEmailPercentage})</div>
                </div>
            </div>
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-primary text-white bg-opacity-75">
                    <div class="stat-value">${BytesReceivedEmail}</div>
                    <div class="stat-label">${L_BYTES_RECEIVED}</div>
                </div>
            </div>
            <div class="col-6 col-md-2">
                <div class="card p-3 stat-card bg-success text-white bg-opacity-75">
                    <div class="stat-value">${BytesDeliveredEmail}</div>
                    <div class="stat-label">${L_BYTES_DELIVERED}</div>
                </div>
            </div>
        </div>

        <h4 class="section-header"><i class="fa-solid fa-chart-line me-2"></i>${L_GRAPHS}</h4>
        <div class="row mb-5 g-4">
            <div class="col-lg-6">
                <div class="card p-2 shadow-sm border-0">
                    <div id="PerDayTrafficSummaryTableGraph" style="height: 350px;"></div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card p-2 shadow-sm border-0">
                    <div id="PerHourTrafficDailyAverageTableGraph" style="height: 350px;"></div>
                </div>
            </div>
        </div>

        <!-- Tables -->
        <div class="accordion" id="reportAccordion">

            <!-- Per Day Traffic -->
            <div class="accordion-item mb-3 border-0 shadow-sm rounded">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button collapsed rounded" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseOne">
                        <i class="fa-solid fa-calendar-day me-2"></i>${L_PER_DAY_TRAFFIC}
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#reportAccordion">
                    <div class="accordion-body">
                        <div class="table-responsive">
                            <table class="table table-hover table-striped" id="PerDayTrafficSummaryTable">
                                <thead>
                                    <tr>
                                        <th>${L_H_DATE}</th>
                                        <th>${L_H_RECEIVED}</th>
                                        <th>${L_H_DELIVERED}</th>
                                        <th>${L_H_DEFERRED}</th>
                                        <th>${L_H_BOUNCED}</th>
                                        <th>${L_H_REJECTED}</th>
                                    </tr>
                                </thead>
                                <tbody>${PerDayTrafficSummaryTable}</tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Per Hour Traffic -->
            <div class="accordion-item mb-3 border-0 shadow-sm rounded">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed rounded" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseTwo">
                        <i class="fa-solid fa-clock me-2"></i>${L_PER_HOUR_TRAFFIC}
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#reportAccordion">
                    <div class="accordion-body">
                        <div class="table-responsive">
                            <table class="table table-hover table-striped" id="PerHourTrafficDailyAverageTable">
                                <thead>
                                    <tr>
                                        <th>${L_H_TIME}</th>
                                        <th>${L_H_RECEIVED}</th>
                                        <th>${L_H_DELIVERED}</th>
                                        <th>${L_H_DEFERRED}</th>
                                        <th>${L_H_BOUNCED}</th>
                                        <th>${L_H_REJECTED}</th>
                                    </tr>
                                </thead>
                                <tbody>${PerHourTrafficDailyAverageTable}</tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Host/Domain Received -->
            <div class="accordion-item mb-3 border-0 shadow-sm rounded">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed rounded" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseHostRcv">
                        <i class="fa-solid fa-globe me-2"></i>${L_HOST_DOMAIN_RECEIVED}
                    </button>
                </h2>
                <div id="collapseHostRcv" class="accordion-collapse collapse" data-bs-parent="#reportAccordion">
                    <div class="accordion-body">
                        <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead>
                                    <tr>
                                        <th>${L_H_MSG_COUNT}</th>
                                        <th>${L_H_BYTES}</th>
                                        <th>${L_H_HOST_DOMAIN}</th>
                                    </tr>
                                </thead>
                                <tbody>${HostDomainSummaryMessagesReceived}</tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Senders by Count -->
            <div class="accordion-item mb-3 border-0 shadow-sm rounded">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed rounded" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseSenderCount">
                        <i class="fa-solid fa-user-pen me-2"></i>${L_SENDERS_BY_COUNT}
                    </button>
                </h2>
                <div id="collapseSenderCount" class="accordion-collapse collapse" data-bs-parent="#reportAccordion">
                    <div class="accordion-body">
                        <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead>
                                    <tr>
                                        <th>${L_H_MSG_COUNT}</th>
                                        <th>${L_H_SENDER}</th>
                                    </tr>
                                </thead>
                                <tbody>${Sendersbymessagecount}</tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recipients by Count -->
            <div class="accordion-item mb-3 border-0 shadow-sm rounded">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed rounded" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseRecipCount">
                        <i class="fa-solid fa-user-check me-2"></i>${L_RECIPIENTS_BY_COUNT}
                    </button>
                </h2>
                <div id="collapseRecipCount" class="accordion-collapse collapse" data-bs-parent="#reportAccordion">
                    <div class="accordion-body">
                        <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead>
                                    <tr>
                                        <th>${L_H_MSG_COUNT}</th>
                                        <th>${L_H_RECIPIENT}</th>
                                    </tr>
                                </thead>
                                <tbody>${RecipientsbyMessageCount}</tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Technical Details -->
        <div class="section-header">${L_DEFERRAL_DETAIL}</div>
        <pre><code class="language-none">${MessageDeferralDetail}</code></pre>

        <div class="section-header">${L_BOUNCE_DETAIL}</div>
        <pre><code class="language-none">${MessageBounceDetailbyrelay}</code></pre>

        <div class="section-header">${L_MAIL_WARNINGS}</div>
        <pre><code class="language-none">${MailWarnings}</code></pre>

        <div class="section-header">${L_MAIL_FATAL_ERRORS}</div>
        <pre><code class="language-none">${MailFatalErrors}</code></pre>

    </div>

    <footer class="text-center">
        <div class="container">
            <p>&copy; <span id="current-year"></span> ${L_COPYRIGHT_POWERED} <a
                    href="https://github.com/KTamas/pflogsumm" class="text-white-50">PFLOGSUMM</a> & <a
                    href="https://github.com/RiaanPretoriusSA/PFLogSumm-HTML-GUI" class="text-white-50">PFLogSumm HTML
                    UI</a></p>
        </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0.0/jquery.counterup.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();

        jQuery(document).ready(function ($) {
            $('.counter').counterUp({
                delay: 10,
                time: 1000
            });

            Highcharts.chart('PerDayTrafficSummaryTableGraph', {
                data: { table: 'PerDayTrafficSummaryTable' },
                chart: { type: 'line' },
                title: { text: '${L_PER_DAY_TRAFFIC}' },
                yAxis: { title: { text: '#' } },
                credits: { enabled: false }
            });

            Highcharts.chart('PerHourTrafficDailyAverageTableGraph', {
                data: { table: 'PerHourTrafficDailyAverageTable' },
                chart: { type: 'line' },
                title: { text: '${L_PER_HOUR_TRAFFIC}' },
                yAxis: { title: { text: '#' } },
                credits: { enabled: false }
            });
        });
    </script>
</body>

</html>